#!/bin/bash

set -e

if [[ -z "$1" ]]
then
    echo "USAGE: git-reauthor NEW_EMAIL"
    echo ""
    exit
fi


# RE-AUTHOR OLD COMMITS

env NEW_EMAIL="$1" git filter-branch -f --commit-filter '
    if [ "$GIT_COMMITTER_NAME" = "Kofi Gumbs" ]
    then
        GIT_COMMITTER_EMAIL="$NEW_EMAIL";
        GIT_AUTHOR_EMAIL="$NEW_EMAIL";
        git commit-tree "$@";
    else
        git commit-tree "$@";
    fi
' HEAD


# USE THIS EMAIL GOING FORWARD

git config user.email "$1"
